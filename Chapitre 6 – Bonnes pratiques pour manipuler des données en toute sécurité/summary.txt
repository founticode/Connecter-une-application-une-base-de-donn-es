ğŸ“˜ PHP & PDO Security Best Practices â€“ Summary
ğŸ¯ Educational Objective

Apply strong security practices when using PHP and PDO to protect applications against SQL Injection, XSS, data leaks, and database misuse.

ğŸ” 1. Input Validation (Checking User Data)

Validation ensures user input has the correct format.

Example (Email validation):

$email = $_POST['email'];

if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
    die("Invalid email format");
}


âœ” Ensures correct structure
âŒ Does NOT protect against SQL injection

ğŸ§¼ 2. Output Sanitization (Prevent XSS)

When displaying user data in HTML, always escape it.

Example:

echo htmlspecialchars($name);


If a user enters:

<script>alert('hack')</script>


Without htmlspecialchars() â†’ the script runs âŒ
With htmlspecialchars() â†’ it becomes safe text âœ”

This prevents XSS (Cross-Site Scripting) attacks.

ğŸ›¡ 3. Prepared Statements (Prevent SQL Injection)

Never insert user input directly into SQL queries.

âŒ Dangerous:

$sql = "INSERT INTO users VALUES ('$name')";


âœ” Secure:

$stmt = $pdo->prepare("INSERT INTO users (name) VALUES (:name)");
$stmt->execute(['name' => $name]);


Prepared statements:

Separate SQL logic from data

Treat user input as pure data

Prevent SQL injection attacks

ğŸ”’ 4. Secure Error Handling

During development:

echo $e->getMessage();


During production âŒ never show real error messages to users.

Better approach:

catch (PDOException $e) {
    error_log($e->getMessage());
    echo "Something went wrong.";
}


âœ” Logs the real error
âœ” Shows a safe message to the user

ğŸ“ 5. Custom Error Logging with file_put_contents()

You can store errors in a custom log file:

file_put_contents(
    'logs/errors.log',
    date("Y-m-d H:i:s") . " - " . $e->getMessage() . PHP_EOL,
    FILE_APPEND
);


Explanation:

logs/errors.log â†’ file path

date() â†’ adds timestamp

PHP_EOL â†’ new line

FILE_APPEND â†’ adds new errors without deleting old ones

Without FILE_APPEND, the file would be overwritten each time.

ğŸ‘¤ 6. Limited Database User Permissions

Never use root in production.

Instead:

CREATE USER 'appuser'@'localhost' IDENTIFIED BY 'strongpassword';
GRANT SELECT, INSERT, UPDATE, DELETE ON local_db.* TO 'appuser'@'localhost';


âœ” Limits damage if hacked
âœ” Follows security best practices

ğŸ’¾ 7. Backup & Data Protection

Always create regular backups.

Possible methods:

Export via phpMyAdmin

Use mysqldump

Store backups securely

Prevents data loss from:

Server crashes

Human errors

System failures

ğŸ§  Security Concept Summary
Tool	                       Protects Against
filter_var()	               Invalid input format
htmlspecialchars()	           XSS
Prepared statements	           SQL Injection
Error logging	               Information leakage
Limited DB user	               System damage
Backups	                       Data loss


âœ… Final Secure Workflow

A professional PHP application should:

Validate user input

Use prepared statements

Escape output with htmlspecialchars()

Hide real error messages

Log errors safely

Use limited database privileges

Create regular backups